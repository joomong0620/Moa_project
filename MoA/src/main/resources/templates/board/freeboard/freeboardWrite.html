<!DOCTYPE html>
<html lang="ko" xmlns="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>자유게시판</title>
    <link rel="stylesheet" th:href="@{/css/freeboardList.css}" />
  </head>

  <body>
    <!-- header.html 조각 포함 -->
    <th:block th:replace="~{common/header}"></th:block>

    <main th:with="pagination=${map.pagination}, boardList=${map.boardList}">
      <div class="free-container">
        <div class="free1">
          <h1 class="title">자유게시판</h1>
          <p class="subtitle">
            자유롭게 공연/전시에 대한 이야기를 함께 나누어보아요!
          </p>
        </div>
      </div>

      <section class="free-category">
        <!-- 게시글이 없는 경우 -->
        <th:block th:if="${#lists.size(boardList) == 0}">
          <p>게시글이 존재하지 않습니다.</p>
        </th:block>

        <!-- 게시글이 있는 경우 -->
        <div class="card" th:each="board : ${boardList}">
          <!-- 썸네일 -->
          <img
            th:if="${board.thumbnail}"
            th:src="${board.thumbnail}"
            alt="thumbnail"
          />
          <img
            th:unless="${board.thumbnail}"
            th:src="@{/images/default.jpg}"
            alt="default"
          />

          <div class="card-content">
            <!-- 제목 (상세보기 링크) -->
            <h3 class="card-title">
              <a
                th:href="@{/freeboard/{code}/{no}(code=${boardCode}, no=${board.boardNo}, cp=${pagination.currentPage})}"
                th:text="${board.boardTitle}"
                >게시글 제목</a
              >
            </h3>

            <!-- 내용 미리보기 -->
            <p class="card-text" th:text="${board.boardContent}">
              내용 미리보기
            </p>

            <!-- 작성자 / 작성일 -->
            <div class="card-info">
              <span th:text="${board.memberNickname}">작성자</span> |
              <span th:text="${board.boardCreateDate}">작성일</span> | 조회수
              <span th:text="${board.readCount}">0</span>
            </div>
          </div>
        </div>
      </section>

      <!-- 페이지네이션 -->
      <div class="pagination-area" th:if="${#lists.size(boardList) > 0}">
        <ul class="pagination">
          <!-- 처음으로 -->
          <li>
            <a th:href="@{/freeboard/{code}(code=${boardCode}, cp=1)}"
              >&lt;&lt;</a
            >
          </li>

          <!-- 이전 -->
          <li>
            <a
              th:href="@{/freeboard/{code}(code=${boardCode}, cp=${pagination.prevPage})}"
              >&lt;</a
            >
          </li>

          <!-- 숫자 페이지 -->
          <th:block
            th:each="i : ${#numbers.sequence(pagination.startPage, pagination.endPage)}"
          >
            <li th:if="${pagination.currentPage == i}">
              <a class="current" th:text="${i}">현재</a>
            </li>
            <li th:unless="${pagination.currentPage == i}">
              <a
                th:href="@{/freeboard/{code}(code=${boardCode}, cp=${i})}"
                th:text="${i}"
                >페이지</a
              >
            </li>
          </th:block>

          <!-- 다음 -->
          <li>
            <a
              th:href="@{/freeboard/{code}(code=${boardCode}, cp=${pagination.nextPage})}"
              >&gt;</a
            >
          </li>

          <!-- 마지막 -->
          <li>
            <a
              th:href="@{/freeboard/{code}(code=${boardCode}, cp=${pagination.maxPage})}"
              >&gt;&gt;</a
            >
          </li>
        </ul>
      </div>

      <!-- 글쓰기 버튼 -->
      <div class="btn-area">
        <button th:if="${session.loginMember}" class="free-write">
          글쓰기
        </button>
      </div>
    </main>

    <!-- footer.html 조각 포함 -->
    <th:block th:replace="~{common/footer}"></th:block>
  </body>
</html>
